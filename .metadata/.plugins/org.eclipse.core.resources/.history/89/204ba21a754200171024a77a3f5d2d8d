package servidor;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.List;
import bd.dbos.Jogador;

public class Servidor extends Thread{
	private static List<Jogador> listaJogadores = new ArrayList<>();
	private static List<Socket> listaCliente = new ArrayList<>();
	private ServerSocket servidor;
	public Sorteio sorteio;
	
	public Servidor() throws IOException
	{
		this.servidor = new ServerSocket(5000);
		this.sorteio = new Sorteio(listaCliente);
		this.sorteio.start();
	}
	
	public void run()
	{
		System.out.println("servidor");
		while(true)
		{
			try
			{
				Socket cliente = servidor.accept();
				
				Record record = new Record(cliente);
				record.start();
				Acesso acesso  = new Acesso(cliente, record, listaJogadores, listaCliente);
				acesso.start();
				new Thread(new ServirCliente(cliente, this.sorteio)).start();
				
			}catch(Exception e){}
		}
	}
}
